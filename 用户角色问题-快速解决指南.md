# ğŸ†˜ ç”¨æˆ·è§’è‰²é—®é¢˜ - å¿«é€Ÿè§£å†³æŒ‡å—

## é—®é¢˜ç—‡çŠ¶

**æ–°å»ºç”¨æˆ·æ—¶ï¼Œè§’è‰²ä¸‹æ‹‰æ¡†é€‰é¡¹å¤ªå°‘æˆ–ä¸ºç©º**

---

## ğŸš€ å¿«é€Ÿè§£å†³ï¼ˆ1åˆ†é’Ÿï¼‰

### æ­¥éª¤1: æ£€æŸ¥é—®é¢˜

```bash
cd /Users/xuanxuanzi/home/s/javapub/mini-goldprice/gold-admin-backend
./test_role_selection.sh
```

### æ­¥éª¤2: å¦‚æœæç¤º"è§’è‰²æ•°æ®ä¸ºç©º"æˆ–"è§’è‰²æ•°é‡å°‘äº5ä¸ª"

#### âœ… æ–¹æ³•A: è¡¥å……ç¼ºå¤±è§’è‰²ï¼ˆæ¨èï¼Œä¸ä¸¢å¤±æ•°æ®ï¼‰

```bash
# ç™»å½•è·å– Token
TOKEN=$(curl -s -X POST http://localhost:8080/api/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}' \
  | jq -r '.data.token')

# æ·»åŠ ç¼ºå¤±è§’è‰²
curl -X POST http://localhost:8080/api/roles \
  -H "Authorization: Bearer $TOKEN" \
  -d '{"name":"æ€»éƒ¨åº—é•¿","code":"head_manager","description":"ç®¡ç†æ‰€æœ‰åº—é“º","sort":2,"status":1}'

curl -X POST http://localhost:8080/api/roles \
  -H "Authorization: Bearer $TOKEN" \
  -d '{"name":"å•åº—åº—é•¿","code":"shop_manager","description":"ç®¡ç†å•ä¸ªåº—é“º","sort":3,"status":1}'

curl -X POST http://localhost:8080/api/roles \
  -H "Authorization: Bearer $TOKEN" \
  -d '{"name":"è´¢åŠ¡","code":"finance","description":"æŸ¥çœ‹æ•°æ®ã€å¯¼å‡ºæŠ¥è¡¨","sort":5,"status":1}'
```

#### æ–¹æ³•B: é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼ˆä¼šä¸¢å¤±æ‰€æœ‰æ•°æ®ï¼ï¼‰

```bash
# åœæ­¢æœåŠ¡
pkill -f "go run main.go"

# åˆ é™¤æ•°æ®åº“
rm -f ./data/gold_admin.db

# é‡å¯æœåŠ¡ï¼ˆä¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼‰
go run main.go
```

### æ­¥éª¤3: åˆ·æ–°å‰ç«¯é¡µé¢

```bash
# åœ¨æµè§ˆå™¨æŒ‰: Cmd+Shift+R (Mac) æˆ– Ctrl+Shift+R (Windows)
```

---

## âœ… éªŒè¯è§£å†³

è®¿é—®ï¼šhttp://localhost:9527/#/system/user

1. ç‚¹å‡»"æ–°å¢ç”¨æˆ·"
2. æŸ¥çœ‹"è§’è‰²"ä¸‹æ‹‰æ¡†
3. åº”è¯¥çœ‹åˆ° **5ä¸ªè§’è‰²é€‰é¡¹**ï¼š
   - âœ… è¶…çº§ç®¡ç†å‘˜
   - âœ… æ€»éƒ¨åº—é•¿
   - âœ… å•åº—åº—é•¿
   - âœ… åº—å‘˜
   - âœ… è´¢åŠ¡

---

## ğŸ“Š æ ‡å‡†è§’è‰²åˆ—è¡¨

| ID | è§’è‰²åç§° | ä»£ç  | æè¿° |
|----|---------|------|------|
| 1 | è¶…çº§ç®¡ç†å‘˜ | super_admin | æ‹¥æœ‰æ‰€æœ‰æƒé™ |
| 2 | åº—å‘˜ | shop_staff | å¤„ç†æ—¥å¸¸ä¸šåŠ¡ |
| 3 | æ€»éƒ¨åº—é•¿ | head_manager | ç®¡ç†æ‰€æœ‰åº—é“º |
| 4 | å•åº—åº—é•¿ | shop_manager | ç®¡ç†å•ä¸ªåº—é“º |
| 5 | è´¢åŠ¡ | finance | æŸ¥çœ‹/å¯¼å‡ºæ•°æ® |

---

## ğŸ› ä»ç„¶æ— æ³•è§£å†³ï¼Ÿ

### 1. æ£€æŸ¥åç«¯æœåŠ¡

```bash
lsof -i :8080
```

å¦‚æœæ²¡æœ‰è¾“å‡ºï¼Œè¯´æ˜æœåŠ¡æœªå¯åŠ¨ï¼š
```bash
cd /Users/xuanxuanzi/home/s/javapub/mini-goldprice/gold-admin-backend
go run main.go
```

### 2. æ£€æŸ¥æµè§ˆå™¨

æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼š
- **Console** çœ‹æ˜¯å¦æœ‰é”™è¯¯
- **Network** æ£€æŸ¥ `/api/roles/all` è¯·æ±‚

### 3. æ¸…é™¤ç¼“å­˜

```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œ
localStorage.clear()
sessionStorage.clear()
location.reload()
```

### 4. æ‰‹åŠ¨æµ‹è¯• API

```bash
curl http://localhost:8080/api/roles/all | jq
```

åº”è¯¥è¿”å›5ä¸ªè§’è‰²çš„JSONæ•°æ®ã€‚

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š
```
/Users/xuanxuanzi/home/s/javapub/mini-goldprice/gold-admin-backend/é—®é¢˜è§£å†³-ç”¨æˆ·è§’è‰²é€‰æ‹©.md
```

è¿è¡Œå®Œæ•´æµ‹è¯•ï¼š
```bash
cd /Users/xuanxuanzi/home/s/javapub/mini-goldprice/gold-admin-backend
./test_user_role.sh
```

---

**æœ€åæ›´æ–°**: 2025-11-04  
**çŠ¶æ€**: âœ… å·²éªŒè¯å¯ç”¨





