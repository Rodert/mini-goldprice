# ğŸ‘¥ ç”¨æˆ·å’Œè§’è‰²ç®¡ç† - å®Œæ•´æŒ‡å—

## ğŸ“‹ ç›®å½•
1. [RBAC æƒé™æ¨¡å‹](#rbac-æƒé™æ¨¡å‹)
2. [ç”¨æˆ·ç®¡ç†](#ç”¨æˆ·ç®¡ç†)
3. [è§’è‰²ç®¡ç†](#è§’è‰²ç®¡ç†)
4. [æƒé™å…³ç³»](#æƒé™å…³ç³»)
5. [API ä½¿ç”¨ç¤ºä¾‹](#api-ä½¿ç”¨ç¤ºä¾‹)
6. [å‰ç«¯ä½¿ç”¨ç¤ºä¾‹](#å‰ç«¯ä½¿ç”¨ç¤ºä¾‹)
7. [å®é™…æ“ä½œæ­¥éª¤](#å®é™…æ“ä½œæ­¥éª¤)

---

## ğŸ” RBAC æƒé™æ¨¡å‹

### æƒé™å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ· User  â”‚ â†â”€â”€â”€â”€â†’ â”‚  è§’è‰² Role   â”‚ â†â”€â”€â”€â”€â†’ â”‚  èœå• Menu   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     (N)                    (M)                     (P)
     
     å¤šå¯¹å¤šå…³ç³»              å¤šå¯¹å¤šå…³ç³»
```

### ä¸‰å±‚æƒé™æ¨¡å‹

```
ç”¨æˆ·ï¼ˆAdminUserï¼‰
  â†“ ï¼ˆé€šè¿‡ user_roles è¡¨å…³è”ï¼‰
è§’è‰²ï¼ˆRoleï¼‰
  â†“ ï¼ˆé€šè¿‡ role_menus è¡¨å…³è”ï¼‰
èœå•ï¼ˆMenuï¼‰
```

### æ•°æ®è¡¨è®¾è®¡

#### 1. admin_users - ç”¨æˆ·è¡¨
```sql
CREATE TABLE admin_users (
  id INTEGER PRIMARY KEY,
  username VARCHAR(50) UNIQUE NOT NULL,    -- ç”¨æˆ·å
  password VARCHAR(255) NOT NULL,          -- å¯†ç ï¼ˆåŠ å¯†ï¼‰
  real_name VARCHAR(50),                   -- çœŸå®å§“å
  phone VARCHAR(20),                       -- æ‰‹æœºå·
  email VARCHAR(100),                      -- é‚®ç®±
  avatar VARCHAR(255),                     -- å¤´åƒ
  status TINYINT DEFAULT 1,                -- çŠ¶æ€ 1:å¯ç”¨ 0:ç¦ç”¨
  last_login_time DATETIME,                -- æœ€åç™»å½•æ—¶é—´
  last_login_ip VARCHAR(50),               -- æœ€åç™»å½•IP
  created_at DATETIME,
  updated_at DATETIME
);
```

#### 2. roles - è§’è‰²è¡¨
```sql
CREATE TABLE roles (
  id INTEGER PRIMARY KEY,
  name VARCHAR(50) NOT NULL,               -- è§’è‰²åç§°
  code VARCHAR(50) UNIQUE NOT NULL,        -- è§’è‰²ä»£ç 
  description TEXT,                        -- æè¿°
  sort INT DEFAULT 0,                      -- æ’åº
  status TINYINT DEFAULT 1,                -- çŠ¶æ€
  created_at DATETIME,
  updated_at DATETIME
);
```

#### 3. user_roles - ç”¨æˆ·è§’è‰²å…³è”è¡¨
```sql
CREATE TABLE user_roles (
  id INTEGER PRIMARY KEY,
  user_id INTEGER NOT NULL,                -- ç”¨æˆ·ID
  role_id INTEGER NOT NULL,                -- è§’è‰²ID
  created_at DATETIME,
  UNIQUE(user_id, role_id)                 -- é˜²æ­¢é‡å¤åˆ†é…
);
```

#### 4. role_menus - è§’è‰²èœå•å…³è”è¡¨
```sql
CREATE TABLE role_menus (
  id INTEGER PRIMARY KEY,
  role_id INTEGER NOT NULL,                -- è§’è‰²ID
  menu_id INTEGER NOT NULL,                -- èœå•ID
  created_at DATETIME,
  UNIQUE(role_id, menu_id)                 -- é˜²æ­¢é‡å¤åˆ†é…
);
```

---

## ğŸ‘¤ ç”¨æˆ·ç®¡ç†

### ç”¨æˆ·å±æ€§

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| username | string | âœ… | ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼Œ3-50å­—ç¬¦ï¼‰ |
| password | string | âœ… | å¯†ç ï¼ˆ6ä½ä»¥ä¸Šï¼ŒbcryptåŠ å¯†ï¼‰ |
| real_name | string | âŒ | çœŸå®å§“å |
| phone | string | âŒ | æ‰‹æœºå· |
| email | string | âŒ | é‚®ç®± |
| avatar | string | âŒ | å¤´åƒURL |
| status | int8 | âŒ | çŠ¶æ€ï¼ˆ1:å¯ç”¨ 0:ç¦ç”¨ï¼‰ |
| role_ids | []uint | âŒ | è§’è‰²IDåˆ—è¡¨ |

### ç”¨æˆ· API æ¥å£

#### 1. è·å–ç”¨æˆ·åˆ—è¡¨
```bash
GET /api/users?page=1&page_size=10&username=admin&status=1
```

**æŸ¥è¯¢å‚æ•°**:
- `page` - é¡µç ï¼ˆé»˜è®¤1ï¼‰
- `page_size` - æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤10ï¼‰
- `username` - ç”¨æˆ·åï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰
- `real_name` - çœŸå®å§“åï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰
- `status` - çŠ¶æ€ï¼ˆ1:å¯ç”¨ 0:ç¦ç”¨ï¼‰

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "data": {
    "list": [
      {
        "id": 1,
        "username": "admin",
        "real_name": "ç³»ç»Ÿç®¡ç†å‘˜",
        "phone": "13800138000",
        "email": "admin@example.com",
        "avatar": "",
        "status": 1,
        "last_login_time": "2025-11-04T10:00:00Z",
        "last_login_ip": "127.0.0.1",
        "created_at": "2025-11-04T10:00:00Z"
      }
    ],
    "total": 1,
    "page": 1,
    "size": 10
  }
}
```

#### 2. è·å–ç”¨æˆ·è¯¦æƒ…
```bash
GET /api/users/:id
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "data": {
    "user": {
      "id": 1,
      "username": "admin",
      "real_name": "ç³»ç»Ÿç®¡ç†å‘˜",
      "status": 1
    },
    "role_ids": [1, 2]  // ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²IDåˆ—è¡¨
  }
}
```

#### 3. åˆ›å»ºç”¨æˆ·
```bash
POST /api/users
Content-Type: application/json
Authorization: Bearer <token>

{
  "username": "test001",
  "password": "123456",
  "real_name": "æµ‹è¯•ç”¨æˆ·",
  "phone": "13800138001",
  "email": "test@example.com",
  "status": 1,
  "role_ids": [1, 2]
}
```

**å“åº”**:
```json
{
  "code": 200,
  "message": "åˆ›å»ºæˆåŠŸ",
  "data": {
    "id": 2,
    "username": "test001",
    "real_name": "æµ‹è¯•ç”¨æˆ·",
    "status": 1
  }
}
```

#### 4. æ›´æ–°ç”¨æˆ·
```bash
PUT /api/users/:id
Content-Type: application/json

{
  "real_name": "æµ‹è¯•ç”¨æˆ·2",
  "phone": "13800138002",
  "status": 1,
  "role_ids": [2, 3]  // é‡æ–°åˆ†é…è§’è‰²
}
```

#### 5. åˆ é™¤ç”¨æˆ·
```bash
DELETE /api/users/:id
```

**æ³¨æ„**: 
- âš ï¸ ä¸èƒ½åˆ é™¤IDä¸º1çš„é»˜è®¤ç®¡ç†å‘˜
- âš ï¸ åˆ é™¤ç”¨æˆ·ä¼šåŒæ—¶åˆ é™¤ç”¨æˆ·è§’è‰²å…³è”

#### 6. ä¿®æ”¹ç”¨æˆ·å¯†ç 
```bash
PUT /api/users/:id/password
Content-Type: application/json

{
  "password": "new_password"
}
```

---

## ğŸ­ è§’è‰²ç®¡ç†

### é¢„è®¾è§’è‰²

| ID | è§’è‰²åç§° | è§’è‰²ä»£ç  | è¯´æ˜ |
|----|----------|----------|------|
| 1 | è¶…çº§ç®¡ç†å‘˜ | super_admin | æ‹¥æœ‰æ‰€æœ‰æƒé™ |
| 2 | æ€»éƒ¨åº—é•¿ | head_manager | ç®¡ç†æ‰€æœ‰åº—é“º |
| 3 | å•åº—åº—é•¿ | shop_manager | ç®¡ç†å•ä¸ªåº—é“º |
| 4 | åº—å‘˜ | shop_staff | åªè¯»æƒé™ |
| 5 | è´¢åŠ¡ | finance | æŸ¥çœ‹æ•°æ®ã€å¯¼å‡º |

### è§’è‰²å±æ€§

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| name | string | âœ… | è§’è‰²åç§° |
| code | string | âœ… | è§’è‰²ä»£ç ï¼ˆå”¯ä¸€ï¼‰ |
| description | string | âŒ | è§’è‰²æè¿° |
| sort | int | âŒ | æ’åº |
| status | int8 | âŒ | çŠ¶æ€ï¼ˆ1:å¯ç”¨ 0:ç¦ç”¨ï¼‰ |
| menu_ids | []uint | âŒ | èœå•IDåˆ—è¡¨ |

### è§’è‰² API æ¥å£

#### 1. è·å–è§’è‰²åˆ—è¡¨
```bash
GET /api/roles?page=1&page_size=10
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "data": {
    "list": [
      {
        "id": 1,
        "name": "è¶…çº§ç®¡ç†å‘˜",
        "code": "super_admin",
        "description": "æ‹¥æœ‰æ‰€æœ‰æƒé™",
        "sort": 1,
        "status": 1,
        "created_at": "2025-11-04T10:00:00Z"
      }
    ],
    "total": 5,
    "page": 1,
    "size": 10
  }
}
```

#### 2. è·å–æ‰€æœ‰è§’è‰²ï¼ˆä¸åˆ†é¡µï¼‰
```bash
GET /api/roles/all
```

**ç”¨é€”**: ç”¨äºä¸‹æ‹‰é€‰æ‹©æ¡†

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "name": "è¶…çº§ç®¡ç†å‘˜",
      "code": "super_admin",
      "status": 1
    },
    {
      "id": 2,
      "name": "æ€»éƒ¨åº—é•¿",
      "code": "head_manager",
      "status": 1
    }
  ]
}
```

#### 3. è·å–è§’è‰²è¯¦æƒ…
```bash
GET /api/roles/:id
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "data": {
    "role": {
      "id": 1,
      "name": "è¶…çº§ç®¡ç†å‘˜",
      "code": "super_admin",
      "description": "æ‹¥æœ‰æ‰€æœ‰æƒé™"
    },
    "menu_ids": [1, 2, 3, 4, 5, 6]  // è§’è‰²æ‹¥æœ‰çš„èœå•ID
  }
}
```

#### 4. åˆ›å»ºè§’è‰²
```bash
POST /api/roles
Content-Type: application/json

{
  "name": "æµ‹è¯•è§’è‰²",
  "code": "test_role",
  "description": "æµ‹è¯•ç”¨è§’è‰²",
  "sort": 10,
  "status": 1,
  "menu_ids": [1, 2, 5]  // åˆ†é…èœå•æƒé™
}
```

#### 5. æ›´æ–°è§’è‰²
```bash
PUT /api/roles/:id
Content-Type: application/json

{
  "name": "æµ‹è¯•è§’è‰²2",
  "description": "æ›´æ–°åçš„æè¿°",
  "status": 1,
  "menu_ids": [1, 2, 3, 5]  // é‡æ–°åˆ†é…èœå•
}
```

**æ³¨æ„**: 
- âš ï¸ ä¸èƒ½ä¿®æ”¹ super_admin è§’è‰²

#### 6. åˆ é™¤è§’è‰²
```bash
DELETE /api/roles/:id
```

**æ³¨æ„**: 
- âš ï¸ ä¸èƒ½åˆ é™¤ super_admin è§’è‰²
- âš ï¸ å¦‚æœè§’è‰²å·²åˆ†é…ç»™ç”¨æˆ·ï¼Œä¸èƒ½åˆ é™¤

---

## ğŸ”— æƒé™å…³ç³»

### æƒé™æµç¨‹å›¾

```
ç”¨æˆ·ç™»å½•
   â†“
æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
   â†“
æŸ¥è¯¢ç”¨æˆ·è§’è‰²ï¼ˆuser_rolesï¼‰
   â†“
æŸ¥è¯¢è§’è‰²èœå•ï¼ˆrole_menusï¼‰
   â†“
è¿”å›èœå•æ ‘
   â†“
å‰ç«¯åŠ¨æ€åŠ è½½è·¯ç”±
```

### æƒé™è®¡ç®—ç¤ºä¾‹

**ç¤ºä¾‹ç”¨æˆ·**: test001

1. **ç”¨æˆ·åŸºæœ¬ä¿¡æ¯**:
   ```json
   {
     "id": 2,
     "username": "test001",
     "real_name": "æµ‹è¯•ç”¨æˆ·"
   }
   ```

2. **ç”¨æˆ·è§’è‰²**ï¼ˆä» user_roles è¡¨æŸ¥è¯¢ï¼‰:
   ```json
   {
     "user_id": 2,
     "role_ids": [2, 3]  // æ€»éƒ¨åº—é•¿ + å•åº—åº—é•¿
   }
   ```

3. **è§’è‰²èœå•**ï¼ˆä» role_menus è¡¨æŸ¥è¯¢ï¼‰:
   ```json
   {
     "role_2_menus": [1, 2, 5, 6],    // æ€»éƒ¨åº—é•¿çš„èœå•
     "role_3_menus": [1, 5, 6]        // å•åº—åº—é•¿çš„èœå•
   }
   ```

4. **åˆå¹¶å»é‡**:
   ```json
   {
     "menu_ids": [1, 2, 5, 6]  // ç”¨æˆ·æœ€ç»ˆæ‹¥æœ‰çš„èœå•
   }
   ```

5. **æ„å»ºèœå•æ ‘**:
   ```json
   [
     {
       "id": 1,
       "title": "ç³»ç»Ÿç®¡ç†",
       "children": [
         {"id": 2, "title": "ç”¨æˆ·ç®¡ç†"}
       ]
     },
     {
       "id": 5,
       "title": "ä»·æ ¼ç®¡ç†",
       "children": [
         {"id": 6, "title": "ä»·æ ¼åˆ—è¡¨"}
       ]
     }
   ]
   ```

---

## ğŸ’» API ä½¿ç”¨ç¤ºä¾‹

### curl å‘½ä»¤ç¤ºä¾‹

#### 1. åˆ›å»ºç”¨æˆ·å¹¶åˆ†é…è§’è‰²
```bash
# è·å– token
TOKEN=$(curl -s -X POST http://localhost:8080/api/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}' \
  | jq -r '.data.token')

# åˆ›å»ºç”¨æˆ·
curl -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "username": "shop_manager_001",
    "password": "123456",
    "real_name": "åº—é•¿001",
    "phone": "13800138001",
    "status": 1,
    "role_ids": [3]
  }'
```

#### 2. ä¿®æ”¹ç”¨æˆ·è§’è‰²
```bash
# å°†ç”¨æˆ·ä»"å•åº—åº—é•¿"æ”¹ä¸º"æ€»éƒ¨åº—é•¿"
curl -X PUT http://localhost:8080/api/users/2 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "role_ids": [2]
  }'
```

#### 3. åˆ›å»ºè‡ªå®šä¹‰è§’è‰²
```bash
# å…ˆè·å–æ‰€æœ‰èœå•
curl -H "Authorization: Bearer $TOKEN" \
  http://localhost:8080/api/menus | jq

# åˆ›å»ºè§’è‰²å¹¶åˆ†é…ç‰¹å®šèœå•
curl -X POST http://localhost:8080/api/roles \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "name": "ä»·æ ¼ç®¡ç†å‘˜",
    "code": "price_admin",
    "description": "åªç®¡ç†ä»·æ ¼",
    "status": 1,
    "menu_ids": [5, 6]
  }'
```

---

## ğŸ¨ å‰ç«¯ä½¿ç”¨ç¤ºä¾‹

### Vue ç»„ä»¶ç¤ºä¾‹

#### 1. ç”¨æˆ·åˆ—è¡¨ç»„ä»¶
```vue
<template>
  <div>
    <!-- æœç´¢è¡¨å• -->
    <el-form :inline="true">
      <el-form-item label="ç”¨æˆ·å">
        <el-input v-model="queryParams.username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" />
      </el-form-item>
      <el-form-item>
        <el-button type="primary" @click="getList">æŸ¥è¯¢</el-button>
        <el-button @click="handleAdd">æ–°å¢ç”¨æˆ·</el-button>
      </el-form-item>
    </el-form>

    <!-- ç”¨æˆ·è¡¨æ ¼ -->
    <el-table :data="userList" border>
      <el-table-column prop="id" label="ID" width="80" />
      <el-table-column prop="username" label="ç”¨æˆ·å" />
      <el-table-column prop="real_name" label="çœŸå®å§“å" />
      <el-table-column prop="phone" label="æ‰‹æœºå·" />
      <el-table-column label="çŠ¶æ€">
        <template slot-scope="scope">
          <el-tag :type="scope.row.status === 1 ? 'success' : 'danger'">
            {{ scope.row.status === 1 ? 'å¯ç”¨' : 'ç¦ç”¨' }}
          </el-tag>
        </template>
      </el-table-column>
      <el-table-column label="æ“ä½œ" width="300">
        <template slot-scope="scope">
          <el-button size="mini" @click="handleEdit(scope.row)">ç¼–è¾‘</el-button>
          <el-button size="mini" @click="handleAssignRole(scope.row)">åˆ†é…è§’è‰²</el-button>
          <el-button size="mini" type="danger" @click="handleDelete(scope.row)">åˆ é™¤</el-button>
        </template>
      </el-table-column>
    </el-table>

    <!-- åˆ†é¡µ -->
    <el-pagination
      :total="total"
      :page-size="queryParams.page_size"
      :current-page="queryParams.page"
      @current-change="handlePageChange"
    />
  </div>
</template>

<script>
import { getUserList, deleteUser } from '@/api/user'

export default {
  data() {
    return {
      userList: [],
      total: 0,
      queryParams: {
        page: 1,
        page_size: 10,
        username: ''
      }
    }
  },
  created() {
    this.getList()
  },
  methods: {
    async getList() {
      const res = await getUserList(this.queryParams)
      this.userList = res.data.list
      this.total = res.data.total
    },
    handlePageChange(page) {
      this.queryParams.page = page
      this.getList()
    },
    handleAdd() {
      this.$router.push('/system/user/add')
    },
    handleEdit(row) {
      this.$router.push('/system/user/edit/' + row.id)
    },
    handleAssignRole(row) {
      // æ‰“å¼€åˆ†é…è§’è‰²å¯¹è¯æ¡†
      this.$refs.roleDialog.open(row)
    },
    handleDelete(row) {
      this.$confirm('ç¡®å®šè¦åˆ é™¤è¯¥ç”¨æˆ·å—ï¼Ÿ', 'æç¤º', {
        type: 'warning'
      }).then(async () => {
        await deleteUser(row.id)
        this.$message.success('åˆ é™¤æˆåŠŸ')
        this.getList()
      })
    }
  }
}
</script>
```

#### 2. åˆ†é…è§’è‰²å¯¹è¯æ¡†
```vue
<template>
  <el-dialog title="åˆ†é…è§’è‰²" :visible.sync="visible">
    <el-checkbox-group v-model="selectedRoles">
      <el-checkbox
        v-for="role in roleList"
        :key="role.id"
        :label="role.id"
      >
        {{ role.name }}
      </el-checkbox>
    </el-checkbox-group>
    <div slot="footer">
      <el-button @click="visible = false">å–æ¶ˆ</el-button>
      <el-button type="primary" @click="handleSubmit">ç¡®å®š</el-button>
    </div>
  </el-dialog>
</template>

<script>
import { getAllRoles } from '@/api/role'
import { getUser, updateUser } from '@/api/user'

export default {
  data() {
    return {
      visible: false,
      userId: null,
      roleList: [],
      selectedRoles: []
    }
  },
  methods: {
    async open(user) {
      this.visible = true
      this.userId = user.id
      
      // è·å–æ‰€æœ‰è§’è‰²
      const rolesRes = await getAllRoles()
      this.roleList = rolesRes.data
      
      // è·å–ç”¨æˆ·å·²æœ‰è§’è‰²
      const userRes = await getUser(user.id)
      this.selectedRoles = userRes.data.role_ids
    },
    async handleSubmit() {
      await updateUser(this.userId, {
        role_ids: this.selectedRoles
      })
      this.$message.success('åˆ†é…æˆåŠŸ')
      this.visible = false
      this.$emit('success')
    }
  }
}
</script>
```

---

## ğŸ“ å®é™…æ“ä½œæ­¥éª¤

### åœºæ™¯1: åˆ›å»ºæ–°ç”¨æˆ·å¹¶åˆ†é…æƒé™

**æ­¥éª¤**:

1. **ç™»å½•ç®¡ç†åå°**
   - è®¿é—®: http://localhost:9527
   - è´¦å·: admin / admin123

2. **è¿›å…¥ç”¨æˆ·ç®¡ç†**
   - ç‚¹å‡»å·¦ä¾§èœå•ï¼šç³»ç»Ÿç®¡ç† â†’ ç”¨æˆ·ç®¡ç†

3. **åˆ›å»ºæ–°ç”¨æˆ·**
   - ç‚¹å‡»"æ–°å¢ç”¨æˆ·"æŒ‰é’®
   - å¡«å†™ä¿¡æ¯ï¼š
     ```
     ç”¨æˆ·åï¼šshop001
     å¯†ç ï¼š123456
     çœŸå®å§“åï¼šå¼ ä¸‰
     æ‰‹æœºå·ï¼š13800138001
     çŠ¶æ€ï¼šå¯ç”¨
     ```

4. **åˆ†é…è§’è‰²**
   - å‹¾é€‰è§’è‰²ï¼šå•åº—åº—é•¿
   - ç‚¹å‡»"ç¡®å®š"

5. **éªŒè¯æƒé™**
   - ç™»å‡ºå½“å‰è´¦å·
   - ä½¿ç”¨æ–°è´¦å·ç™»å½•ï¼ˆshop001 / 123456ï¼‰
   - æŸ¥çœ‹å·¦ä¾§èœå•ï¼ˆåªèƒ½çœ‹åˆ°å•åº—åº—é•¿çš„èœå•ï¼‰

---

### åœºæ™¯2: åˆ›å»ºè‡ªå®šä¹‰è§’è‰²

**æ­¥éª¤**:

1. **è¿›å…¥è§’è‰²ç®¡ç†**
   - ç³»ç»Ÿç®¡ç† â†’ è§’è‰²ç®¡ç†

2. **åˆ›å»ºæ–°è§’è‰²**
   - ç‚¹å‡»"æ–°å¢è§’è‰²"
   - å¡«å†™ä¿¡æ¯ï¼š
     ```
     è§’è‰²åç§°ï¼šä»·æ ¼ä¸“å‘˜
     è§’è‰²ä»£ç ï¼šprice_staff
     æè¿°ï¼šåªèƒ½æŸ¥çœ‹å’Œç®¡ç†ä»·æ ¼
     ```

3. **åˆ†é…èœå•æƒé™**
   - å±•å¼€èœå•æ ‘
   - å‹¾é€‰ä»¥ä¸‹èœå•ï¼š
     - âœ… é¦–é¡µ
     - âœ… ä¸šåŠ¡ç®¡ç†
       - âœ… ä»·æ ¼ç®¡ç†
   - ç‚¹å‡»"ç¡®å®š"

4. **å°†è§’è‰²åˆ†é…ç»™ç”¨æˆ·**
   - è¿›å…¥ç”¨æˆ·ç®¡ç†
   - æ‰¾åˆ°ç›®æ ‡ç”¨æˆ·
   - ç‚¹å‡»"åˆ†é…è§’è‰²"
   - å‹¾é€‰"ä»·æ ¼ä¸“å‘˜"
   - ç‚¹å‡»"ç¡®å®š"

---

### åœºæ™¯3: ä¿®æ”¹ç”¨æˆ·æƒé™

**æ­¥éª¤**:

1. **æŸ¥æ‰¾ç”¨æˆ·**
   - ç”¨æˆ·ç®¡ç† â†’ æœç´¢ç”¨æˆ·å

2. **ç¼–è¾‘ç”¨æˆ·**
   - ç‚¹å‡»"ç¼–è¾‘"æŒ‰é’®

3. **ä¿®æ”¹è§’è‰²**
   - å–æ¶ˆå‹¾é€‰ï¼šå•åº—åº—é•¿
   - å‹¾é€‰ï¼šæ€»éƒ¨åº—é•¿
   - ç‚¹å‡»"ä¿å­˜"

4. **æƒé™ç«‹å³ç”Ÿæ•ˆ**
   - ç”¨æˆ·ä¸‹æ¬¡ç™»å½•æ—¶æƒé™æ›´æ–°
   - æˆ–é€šçŸ¥ç”¨æˆ·é‡æ–°ç™»å½•

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. è§’è‰²è®¾è®¡åŸåˆ™

âœ… **æ¨èåšæ³•**:
- æŒ‰èŒä½åˆ›å»ºè§’è‰²ï¼ˆå¦‚ï¼šåº—é•¿ã€åº—å‘˜ã€è´¢åŠ¡ï¼‰
- ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªè§’è‰²
- è§’è‰²åç§°è¦æ¸…æ™°æ˜“æ‡‚
- ä½¿ç”¨ code æ ‡è¯†ç¬¦ï¼ˆå¦‚ï¼šshop_managerï¼‰

âŒ **ä¸æ¨èåšæ³•**:
- ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºå•ç‹¬çš„è§’è‰²
- è§’è‰²åç§°è¿‡äºç¬¼ç»Ÿï¼ˆå¦‚ï¼šç”¨æˆ·1ã€è§’è‰²Aï¼‰
- é¢‘ç¹ä¿®æ”¹æ ¸å¿ƒè§’è‰²æƒé™

### 2. æƒé™åˆ†é…åŸåˆ™

âœ… **æœ€å°æƒé™åŸåˆ™**:
- åªåˆ†é…å¿…è¦çš„æƒé™
- æ–°ç”¨æˆ·é»˜è®¤æœ€å°æƒé™
- å®šæœŸå®¡æŸ¥æƒé™

âœ… **èŒè´£åˆ†ç¦»åŸåˆ™**:
- è´¢åŠ¡åªèƒ½æŸ¥çœ‹ï¼Œä¸èƒ½ä¿®æ”¹
- åº—å‘˜ä¸èƒ½çœ‹åˆ°æ•æ„Ÿæ•°æ®
- è¶…çº§ç®¡ç†å‘˜æƒé™è¦æ…ç”¨

### 3. å®‰å…¨å»ºè®®

ğŸ”’ **å¯†ç å®‰å…¨**:
- å¼ºåˆ¶6ä½ä»¥ä¸Šå¯†ç 
- å®šæœŸæ›´æ¢å¯†ç 
- ä½¿ç”¨ bcrypt åŠ å¯†

ğŸ”’ **è´¦å·å®‰å…¨**:
- é™åˆ¶ç™»å½•å¤±è´¥æ¬¡æ•°
- è®°å½•ç™»å½•æ—¥å¿—
- å¼‚å¸¸ç™»å½•å‘Šè­¦

ğŸ”’ **æƒé™å®‰å…¨**:
- ä¸è¦ç»™æ™®é€šç”¨æˆ·è¶…çº§ç®¡ç†å‘˜æƒé™
- å®šæœŸæ¸…ç†æ— ç”¨è´¦å·
- ç¦»èŒå‘˜å·¥åŠæ—¶ç¦ç”¨è´¦å·

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: ç”¨æˆ·çœ‹ä¸åˆ°ä»»ä½•èœå•ï¼Ÿ
**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç”¨æˆ·æ˜¯å¦åˆ†é…äº†è§’è‰²
2. è§’è‰²æ˜¯å¦åˆ†é…äº†èœå•
3. èœå•çŠ¶æ€æ˜¯å¦å¯ç”¨ï¼ˆstatus=1ï¼‰
4. èœå•æ˜¯å¦å¯è§ï¼ˆvisible=1ï¼‰

### Q2: å¦‚ä½•æ‰¹é‡åˆ†é…è§’è‰²ï¼Ÿ
**A**: å¯ä»¥é€šè¿‡å¾ªç¯è°ƒç”¨ APIï¼š
```javascript
const userIds = [2, 3, 4, 5]
const roleId = 3

for (const userId of userIds) {
  await updateUser(userId, {
    role_ids: [roleId]
  })
}
```

### Q3: åˆ é™¤è§’è‰²åç”¨æˆ·ä¼šæ€æ ·ï¼Ÿ
**A**: 
- è§’è‰²èœå•å…³è”ä¼šè¢«åˆ é™¤
- ç”¨æˆ·è§’è‰²å…³è”ä¼šè¢«åˆ é™¤
- ç”¨æˆ·ä¸‹æ¬¡ç™»å½•æ—¶èœå•ä¼šæ›´æ–°

### Q4: å¯ä»¥è·¨åº—é“ºåˆ†é…æƒé™å—ï¼Ÿ
**A**: 
- å¯ä»¥é€šè¿‡èœå•å®ç°
- åˆ›å»ºä¸åŒåº—é“ºçš„èœå•ç›®å½•
- å°†å¯¹åº”åº—é“ºèœå•åˆ†é…ç»™è§’è‰²

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [API æ¥å£æ–‡æ¡£](./API.md)
- [èœå•ç®¡ç†æŒ‡å—](./èœå•ç®¡ç†æŒ‡å—.md)
- [å¿«é€Ÿå¯åŠ¨æŒ‡å—](./å¿«é€Ÿå¯åŠ¨.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2025-11-04  
**ç»´æŠ¤è€…**: AI Assistant







