# ğŸš€ åå°ç®¡ç†ç³»ç»Ÿ - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## âš¡ ä¸€é”®å¯åŠ¨ï¼ˆ3åˆ†é’Ÿä¸Šæ‰‹ï¼‰

### 1. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd gold-admin-backend
go run main.go
```

**é¦–æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨ï¼š**
- âœ… åˆ›å»º SQLite æ•°æ®åº“æ–‡ä»¶ï¼š`./data/gold_admin.db`
- âœ… è‡ªåŠ¨åˆ›å»ºæ‰€æœ‰æ•°æ®è¡¨
- âœ… åˆå§‹åŒ–é»˜è®¤æ•°æ®ï¼ˆç®¡ç†å‘˜ã€è§’è‰²ã€èœå•ã€åº—é“ºã€ä»·æ ¼ï¼‰

**å¯åŠ¨æˆåŠŸåçœ‹åˆ°ï¼š**
```
æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Œç›‘å¬åœ°å€: :8080
æ•°æ®åº“æ–‡ä»¶: ./data/gold_admin.db
è®¿é—® http://localhost:8080/ping æµ‹è¯•æœåŠ¡
========================================
åˆå§‹åŒ–æ•°æ®å®Œæˆï¼
é»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼šadmin
é»˜è®¤å¯†ç ï¼šadmin123
========================================
```

### 2. æµ‹è¯•æœåŠ¡æ˜¯å¦è¿è¡Œ

```bash
# æµ‹è¯•æœåŠ¡å¥åº·æ£€æŸ¥
curl http://localhost:8080/ping

# é¢„æœŸè¿”å›
{"message":"pong"}
```

---

## ğŸ” ç™»å½•æµ‹è¯•

### ä½¿ç”¨ curl æµ‹è¯•ç™»å½•

```bash
curl -X POST http://localhost:8080/api/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "admin123"
  }'
```

**æˆåŠŸè¿”å›ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user_info": {
      "id": 1,
      "username": "admin",
      "real_name": "ç³»ç»Ÿç®¡ç†å‘˜",
      "avatar": "",
      "roles": ["super_admin"]
    },
    "menu_list": [...]
  }
}
```

---

## ğŸ“‹ API æ¥å£æµ‹è¯•

### è®¾ç½® Token ç¯å¢ƒå˜é‡ï¼ˆæ–¹ä¾¿æµ‹è¯•ï¼‰

```bash
# å…ˆç™»å½•è·å– token
TOKEN=$(curl -s -X POST http://localhost:8080/api/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}' \
  | grep -o '"token":"[^"]*"' \
  | cut -d'"' -f4)

echo $TOKEN
```

### 1. é¦–é¡µçœ‹æ¿ç»Ÿè®¡

```bash
curl http://localhost:8080/api/dashboard/stats \
  -H "Authorization: Bearer $TOKEN"
```

### 2. è·å–ç”¨æˆ·åˆ—è¡¨

```bash
curl http://localhost:8080/api/users?page=1&page_size=10 \
  -H "Authorization: Bearer $TOKEN"
```

### 3. è·å–è§’è‰²åˆ—è¡¨

```bash
curl http://localhost:8080/api/roles \
  -H "Authorization: Bearer $TOKEN"
```

### 4. è·å–èœå•æ ‘

```bash
curl http://localhost:8080/api/menus \
  -H "Authorization: Bearer $TOKEN"
```

### 5. è·å–ä»·æ ¼åˆ—è¡¨

```bash
curl http://localhost:8080/api/prices \
  -H "Authorization: Bearer $TOKEN"
```

### 6. è·å–åº—é“ºåˆ—è¡¨

```bash
curl http://localhost:8080/api/shops \
  -H "Authorization: Bearer $TOKEN"
```

### 7. è·å–é¢„çº¦åˆ—è¡¨

```bash
curl http://localhost:8080/api/appointments \
  -H "Authorization: Bearer $TOKEN"
```

---

## ğŸ¯ å®Œæ•´æ¥å£æ¸…å•

### è®¤è¯æ¨¡å—
- `POST /api/login` - ç™»å½•
- `POST /api/logout` - ç™»å‡º
- `GET /api/user/info` - è·å–ç”¨æˆ·ä¿¡æ¯

### é¦–é¡µçœ‹æ¿
- `GET /api/dashboard/stats` - ç»Ÿè®¡æ•°æ®
- `GET /api/dashboard/activities` - æœ€è¿‘åŠ¨æ€
- `GET /api/dashboard/trend` - é¢„çº¦è¶‹åŠ¿

### ç”¨æˆ·ç®¡ç†
- `GET /api/users` - ç”¨æˆ·åˆ—è¡¨
- `GET /api/users/:id` - ç”¨æˆ·è¯¦æƒ…
- `POST /api/users` - åˆ›å»ºç”¨æˆ·
- `PUT /api/users/:id` - æ›´æ–°ç”¨æˆ·
- `DELETE /api/users/:id` - åˆ é™¤ç”¨æˆ·
- `PUT /api/users/:id/password` - ä¿®æ”¹å¯†ç 

### è§’è‰²ç®¡ç†
- `GET /api/roles` - è§’è‰²åˆ—è¡¨
- `GET /api/roles/all` - æ‰€æœ‰è§’è‰²ï¼ˆä¸‹æ‹‰ï¼‰
- `GET /api/roles/:id` - è§’è‰²è¯¦æƒ…
- `POST /api/roles` - åˆ›å»ºè§’è‰²
- `PUT /api/roles/:id` - æ›´æ–°è§’è‰²
- `DELETE /api/roles/:id` - åˆ é™¤è§’è‰²

### èœå•ç®¡ç†
- `GET /api/menus` - èœå•æ ‘
- `GET /api/menus/tree` - èœå•æ ‘ï¼ˆé€‰æ‹©ç”¨ï¼‰
- `GET /api/menus/:id` - èœå•è¯¦æƒ…
- `POST /api/menus` - åˆ›å»ºèœå•
- `PUT /api/menus/:id` - æ›´æ–°èœå•
- `DELETE /api/menus/:id` - åˆ é™¤èœå•

### ä»·æ ¼ç®¡ç†
- `GET /api/prices` - ä»·æ ¼åˆ—è¡¨
- `GET /api/prices/:id` - ä»·æ ¼è¯¦æƒ…
- `POST /api/prices` - åˆ›å»ºä»·æ ¼
- `PUT /api/prices/:id` - æ›´æ–°ä»·æ ¼
- `DELETE /api/prices/:id` - åˆ é™¤ä»·æ ¼
- `POST /api/prices/sync` - åŒæ­¥åŸºç¡€ä»·

### åº—é“ºç®¡ç†
- `GET /api/shops` - åº—é“ºåˆ—è¡¨
- `GET /api/shops/all` - æ‰€æœ‰åº—é“ºï¼ˆä¸‹æ‹‰ï¼‰
- `GET /api/shops/:id` - åº—é“ºè¯¦æƒ…
- `POST /api/shops` - åˆ›å»ºåº—é“º
- `PUT /api/shops/:id` - æ›´æ–°åº—é“º
- `DELETE /api/shops/:id` - åˆ é™¤åº—é“º

### é¢„çº¦ç®¡ç†
- `GET /api/appointments` - é¢„çº¦åˆ—è¡¨
- `GET /api/appointments/stats` - é¢„çº¦ç»Ÿè®¡
- `GET /api/appointments/:id` - é¢„çº¦è¯¦æƒ…
- `POST /api/appointments` - åˆ›å»ºé¢„çº¦
- `PUT /api/appointments/:id` - æ›´æ–°é¢„çº¦
- `DELETE /api/appointments/:id` - åˆ é™¤é¢„çº¦

---

## ğŸ“¦ åˆå§‹åŒ–æ•°æ®è¯´æ˜

### é»˜è®¤ç®¡ç†å‘˜è´¦å·
- **ç”¨æˆ·å**: admin
- **å¯†ç **: admin123
- **è§’è‰²**: è¶…çº§ç®¡ç†å‘˜

### é»˜è®¤è§’è‰²ï¼ˆ5ä¸ªï¼‰
1. è¶…çº§ç®¡ç†å‘˜ (super_admin) - æ‰€æœ‰æƒé™
2. æ€»éƒ¨åº—é•¿ (head_manager) - ç®¡ç†æ‰€æœ‰åº—é“º
3. å•åº—åº—é•¿ (shop_manager) - ç®¡ç†å•ä¸ªåº—é“º
4. åº—å‘˜ (shop_staff) - åªè¯»æƒé™
5. è´¢åŠ¡ (finance) - æ•°æ®æŸ¥çœ‹/å¯¼å‡º

### é»˜è®¤èœå•
- é¦–é¡µ
- ä¸šåŠ¡ç®¡ç†
  - ä»·æ ¼ç®¡ç†
  - é¢„çº¦ç®¡ç†
  - åº—é“ºç®¡ç†
- ç³»ç»Ÿç®¡ç†
  - ç”¨æˆ·ç®¡ç†
  - è§’è‰²ç®¡ç†
  - èœå•ç®¡ç†

### é»˜è®¤åº—é“ºï¼ˆ2ä¸ªï¼‰
- æ²ªé‡‘æ±‡æ€»åº— (shop1)
- æ²ªé‡‘æ±‡æµ¦ä¸œåº— (shop2)

### é»˜è®¤ä»·æ ¼ï¼ˆ3ä¸ªï¼‰
- é»„é‡‘9999 (Au9999)
- é»„é‡‘999 (Au999)
- ç™½é“¶999 (Ag999)

---

## ğŸ› ï¸ å¼€å‘å·¥å…·

### Postman å¯¼å…¥æµ‹è¯•

å¯ä»¥ä½¿ç”¨ Postman å¯¼å…¥ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```json
{
  "base_url": "http://localhost:8080/api",
  "token": "ä»ç™»å½•æ¥å£è·å–"
}
```

### VSCode REST Client

å®‰è£… REST Client æ’ä»¶åï¼Œåˆ›å»º `test.http` æ–‡ä»¶ï¼š

```http
### ç™»å½•
POST {{base_url}}/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}

### è·å–ç”¨æˆ·åˆ—è¡¨
GET {{base_url}}/users
Authorization: Bearer {{token}}
```

---

## ğŸ” æŸ¥çœ‹æ•°æ®åº“

### ä½¿ç”¨ SQLite å‘½ä»¤è¡Œ

```bash
# è¿›å…¥æ•°æ®åº“
sqlite3 ./data/gold_admin.db

# æŸ¥çœ‹æ‰€æœ‰è¡¨
.tables

# æŸ¥çœ‹ç”¨æˆ·è¡¨
SELECT * FROM admin_users;

# æŸ¥çœ‹è§’è‰²è¡¨
SELECT * FROM roles;

# é€€å‡º
.quit
```

### ä½¿ç”¨ DB Browser for SQLiteï¼ˆå›¾å½¢ç•Œé¢ï¼‰

ä¸‹è½½åœ°å€ï¼šhttps://sqlitebrowser.org/

---

## âš™ï¸ é…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶ä½ç½®ï¼š`config/config.yaml`

```yaml
server:
  port: 8080              # æœåŠ¡ç«¯å£
  mode: debug             # debug / release

database:
  type: sqlite            # æ•°æ®åº“ç±»å‹
  path: ./data/gold_admin.db  # SQLite æ•°æ®åº“è·¯å¾„

jwt:
  secret: gold-admin-secret-key-change-me-in-production
  expire: 168             # Token è¿‡æœŸæ—¶é—´ï¼ˆå°æ—¶ï¼‰

log:
  level: info             # æ—¥å¿—çº§åˆ«
  path: ./logs            # æ—¥å¿—è·¯å¾„
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: å¯åŠ¨æŠ¥é”™ "æ— æ³•åˆ›å»ºæ•°æ®ç›®å½•"ï¼Ÿ
**A**: ç¡®ä¿æœ‰å†™æƒé™ï¼Œæˆ–æ‰‹åŠ¨åˆ›å»ºç›®å½•ï¼š
```bash
mkdir -p data logs
```

### Q2: å¦‚ä½•é‡ç½®æ•°æ®åº“ï¼Ÿ
**A**: åˆ é™¤æ•°æ®åº“æ–‡ä»¶åé‡æ–°å¯åŠ¨ï¼š
```bash
rm -rf ./data/gold_admin.db
go run main.go
```

### Q3: å¦‚ä½•ä¿®æ”¹ç«¯å£ï¼Ÿ
**A**: ç¼–è¾‘ `config/config.yaml` ä¸­çš„ `server.port`

### Q4: Token è¿‡æœŸäº†æ€ä¹ˆåŠï¼Ÿ
**A**: é‡æ–°ç™»å½•è·å–æ–°çš„ token

### Q5: å¦‚ä½•æŸ¥çœ‹æ—¥å¿—ï¼Ÿ
**A**: æŸ¥çœ‹ `./logs` ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶

---

## ğŸ‰ ä¸‹ä¸€æ­¥

### å¯åŠ¨å‰ç«¯ç®¡ç†ç•Œé¢

```bash
cd ../gold-admin-frontend
npm install
npm run dev
```

è®¿é—®ï¼šhttp://localhost:8081

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- [å®Œæ•´æ–‡æ¡£](./README.md)
- [API æ–‡æ¡£](./API.md)
- [éƒ¨ç½²æ–‡æ¡£](./DEPLOY.md)

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ğŸ’°**
